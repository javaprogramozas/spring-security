<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="jquery-url.min.js"></script>
    <script src="jquery.cookie.js"></script>
    <script src="luxon.min.js"></script>
    <script src="app.js"></script>
    <title>Bejelentkezés!</title>
    <script>
        $(function(){
          $("#login-form").on("submit", function(event) {
              event.preventDefault();
              $.ajax({
                  method: "POST",
                  url: "/login",
                  data: $(this).serialize(),
                  success: function(result) {
                      let returnPath = $.url("?returnTo");
                      let target;
                      if (returnPath) {
                        target = decodeURIComponent(returnPath);
                      } else {
                        target = "/";
                      }
                      window.location.replace(target);
                  },
                  error: function() {
                    $("#login-failed").show();
                  }
              });
          });
          if ($.url("?register") !== undefined) {
              $("#register").show();
          }
        });
    </script>
</head>
<body>
<h2>Bejelentkezés</h2>
<div id="login-box">
    <div id="login-failed" style="color:red; display:none">Email vagy jelszó nem megfelelő!</div>
    <div id="register" style="display:none">Sikeres regisztráció</div>
    <form id="login-form" method="post" action="/login" autocomplete="off">
        <p>
            <label for="username">Email</label>
            <input type="text" id="username" name="username" placeholder="Email">
        </p>
        <p>
            <label for="password">Jelszó</label>
            <input type="password" id="password" name="password" placeholder="Jelszó">
        </p>
        <button type="submit">Belépés</button>
    </form>
    <a href="/register.html">Regisztráció</a>
    <br/>
    <!--a href="//github.com" th:href="@{/oauth2/authorization/github}">Github bejelentkezés</a-->
</div>
</body>
</html>
